{% extends 'main/base.html' %}
{% load static %}

{% block title %}Volunteering & Student Placements - Geeza Break{% endblock %}

{% block body_class %}volunteer{% endblock %}

{% block content %}
<style>
body {
    background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 25%, #d1e7ff 50%, #b3d9ff 75%, #9ec7ff 100%);
    min-height: 100vh;
}
.volunteer-hero {
    background: linear-gradient(135deg, #007bbe 0%, #005a8f 50%, #004080 100%);
    color: white;
    padding: 4rem 0;
    text-align: center;
}

.volunteer-hero h1 {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.volunteer-hero p {
    font-size: 1.25rem;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
}

.stories-section {
    padding: 4rem 0;
    background: linear-gradient(135deg, #f0f8ff 0%, #e6f3ff 100%);
}

.stories-section h2 {
    text-align: center;
    color: #007bbe;
    font-size: 2.5rem;
    margin-bottom: 3rem;
    font-weight: 600;
}

.story-card {
    background: linear-gradient(135deg, #a6ce39 0%, #95bd30 100%);
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    overflow: hidden;
    margin-bottom: 2rem;
    transition: transform 0.3s ease;
    border: 1px solid rgba(166, 206, 57, 0.3);
}

.story-card:hover {
    transform: translateY(-5px);
}

.story-image {
    height: 250px;
    background-size: cover;
    background-position: center;
}

.story-content {
    padding: 2rem;
}

.story-content h3 {
    color: white;
    font-size: 1.5rem;
    margin-bottom: 1rem;
    font-weight: 600;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.story-content p {
    color: rgba(255, 255, 255, 0.95);
    line-height: 1.6;
    margin-bottom: 1.5rem;
}

.story-quote {
    font-style: italic;
    color: rgba(255, 255, 255, 0.9);
    border-left: 4px solid rgba(250, 206, 3, 0.8);
    padding-left: 1rem;
    margin: 1.5rem 0;
}

.roles-section {
    padding: 4rem 0;
    background: linear-gradient(135deg, #e6f3ff 0%, #d1e7ff 100%);
}

.roles-section h2 {
    text-align: center;
    color: #007bbe;
    font-size: 2.5rem;
    margin-bottom: 3rem;
    font-weight: 600;
}

.role-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
}

.role-card {
    background: linear-gradient(135deg, #a6ce39 0%, #9ec235 100%);
    border: 2px solid rgba(166, 206, 57, 0.4);
    border-radius: 15px;
    padding: 2rem;
    text-align: center;
    transition: all 0.3s ease;
}

.role-card:hover {
    border-color: #007bbe;
    box-shadow: 0 5px 20px rgba(0,123,187,0.1);
}

.role-icon {
    width: 80px;
    height: 80px;
    background: #007bbe;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.5rem;
    color: white;
    font-size: 2rem;
}

.role-card h3 {
    color: black;
    font-size: 1.5rem;
    margin-bottom: 1rem;
    font-weight: 600;
    text-shadow: none;
}

.role-card p {
    color: black;
    line-height: 1.6;
    margin-bottom: 1.5rem;
}

.role-commitment {
    background: #face03;
    color: #007bbe;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-weight: 600;
    display: inline-block;
}

.student-section {
    padding: 4rem 0;
    background: linear-gradient(135deg, #d1e7ff 0%, #b3d9ff 100%);
}

.student-section h2 {
    text-align: center;
    color: #007bbe;
    font-size: 2.5rem;
    margin-bottom: 3rem;
    font-weight: 600;
}

.student-info {
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
}

.student-info p {
    font-size: 1.1rem;
    line-height: 1.6;
    color: #666;
    margin-bottom: 2rem;
}

.student-benefits {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin: 3rem 0;
}

.benefit-item {
    background: linear-gradient(135deg, #a6ce39 0%, #8db52b 100%);
    padding: 2rem;
    border-radius: 10px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    border: 1px solid rgba(166, 206, 57, 0.3);
}

.benefit-item h4 {
    color: white;
    margin-bottom: 1rem;
    font-weight: 600;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.benefit-item p {
    color: rgba(255, 255, 255, 0.95);
    line-height: 1.6;
}

.form-section {
    padding: 4rem 0;
    background: linear-gradient(135deg, #b3d9ff 0%, #9ec7ff 100%);
}

.form-section h2 {
    text-align: center;
    color: #007bbe;
    font-size: 2.5rem;
    margin-bottom: 3rem;
    font-weight: 600;
}

.interest-form {
    max-width: 600px;
    margin: 0 auto;
    background: linear-gradient(135deg, #a6ce39 0%, #7da924 100%);
    padding: 3rem;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    border: 1px solid rgba(166, 206, 57, 0.3);
}

.form-group {
    margin-bottom: 2rem;
}

.form-group label {
    display: block;
    color: white;
    font-weight: 600;
    margin-bottom: 0.5rem;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
}

.form-group input,
.form-group select,
.form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
    background: rgba(255, 255, 255, 0.9);
    color: #333;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #007bbe;
    box-shadow: 0 0 0 3px rgba(0, 123, 187, 0.1);
}

.checkbox-group {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 0.5rem;
}

.checkbox-group .checkbox-item {
    display: flex;
    align-items: center;
}

.checkbox-group .checkbox-item input[type="checkbox"] {
    width: auto;
    margin-right: 0.5rem;
}

/* Django form styling */
.interest-form ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.interest-form li {
    margin-bottom: 0.5rem;
}

.interest-form input[type="checkbox"] {
    width: auto;
    margin-right: 0.5rem;
}

.submit-btn {
    background: #face03;
    color: black;
    border: none;
    padding: 1rem 2rem;
    border-radius: 8px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s ease;
    width: 100%;
}

.submit-btn:hover {
    background: #f5c002;
}

/* Ensure yellow button styling takes precedence */
.interest-form .submit-btn,
#volunteerSubmitBtn {
    background: #face03 !important;
    color: black !important;
    border: none !important;
    padding: 1rem 2rem !important;
    border-radius: 8px !important;
    font-size: 1.1rem !important;
    font-weight: 600 !important;
    cursor: pointer !important;
    transition: background 0.3s ease !important;
    width: 100% !important;
}

.interest-form .submit-btn:hover,
#volunteerSubmitBtn:hover {
    background: #f5c002 !important;
}

.alert {
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 2rem;
}

.alert-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

@media (max-width: 768px) {
    .volunteer-hero h1 {
        font-size: 2rem;
    }

    .volunteer-hero p {
        font-size: 1rem;
    }

    .stories-section h2,
    .roles-section h2,
    .student-section h2,
    .form-section h2 {
        font-size: 2rem;
    }

    .role-grid {
        grid-template-columns: 1fr;
    }

        /* 4-line clamp for previews (no plugin needed) */
        .clamp-4 {
            display: -webkit-box;
            -webkit-line-clamp: 4;
            line-clamp: 4;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        /* subtle load-in animation */
        @keyframes cardIn {
            from { opacity: 0; transform: translateY(10px); }
            to   { opacity: 1; transform: translateY(0); }
        }
        .animate-cardIn { animation: cardIn .5s ease-out both; }
</style>

<section class="volunteer-hero">
    <div class="container">
        <h1>Make a Difference</h1>
        <p>Join our community of volunteers and help create positive change in the lives of children and families in our local area.</p>
    </div>
</section>

<section class="stories-section">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="text-3xl md:text-4xl font-extrabold text-blue-700">Volunteer Stories</h2>
            <p class="text-gray-700 mt-2">Real journeys from our community — why they volunteer, what they've learned, and the difference it makes.</p>
        </div>

        <div class="row g-4">
            <!-- Card: Gerry -->
            <div class="col-md-6 mb-4">
                <article
                    class="animate-cardIn rounded-3 shadow-lg p-4 transition-all duration-300 hover:shadow-xl"
                    style="background:#a6ce39; color:#000; border: none;"
                    id="story-gerry"
                >
                    <div class="d-flex align-items-center gap-3 mb-4">
                        <div class="rounded-circle d-flex align-items-center justify-content-center bg-white bg-opacity-75 text-dark fw-bold" style="width: 56px; height: 56px; font-size: 1.25rem;">G</div>
                        <div>
                            <h3 class="fw-bold mb-1" style="font-size: 1.25rem;">Gerry (Geraldine) — Respite Carer</h3>
                            <p class="opacity-75 mb-0" style="font-size: 0.875rem;">Volunteer since Dec 2023</p>
                        </div>
                    </div>

                    <!-- PREVIEW (4 lines) -->
                    <p class="clamp-4 mb-4" style="line-height: 1.6; font-size: 1.02rem;" data-preview="gerry">
                        Geeza Break Marks Volunteers' week 2025. I have been a volunteer with Geeza break as a Respite Carer since December 2023.
                        Prior to this I worked in the Social Housing sector for 43 years, retiring in 2023. This allowed me to look at voluntary opportunities.
                        I learned about Geeza break through a friend who is employed by Geeza break, and the great work they do in the community.
                        Coming from the East end of Glasgow and my work experience in the area, I am also aware of the need for such a support service in that area.
                        I have found my time providing respite care very enjoyable and rewarding… (read full story below)
                    </p>

                    <!-- FULL TEXT (hidden until expanded) -->
                    <div class="d-none" style="line-height: 1.6; font-size: 1.02rem;" data-full="gerry">
                        <div class="mb-3">
                            <p><strong>Geeza Break Marks Volunteers' week 2025</strong></p>
                            <p>I have been a volunteer with Geeza break as a Respite Carer since December 2023.</p>
                            <p>Prior to this I worked in the Social Housing sector for 43 years, retiring in 2023. This allowed me to look at voluntary opportunities.</p>
                            <p>I learned about Geeza break through a friend who is employed by Geeza break, and the great work they do in the community.</p>
                            <p>Coming from the East end of Glasgow and my work experience in the area, I am also aware of the need for such a support service in that area.</p>
                            <p><strong>Geeza Break Marks Volunteers' week 2025</strong></p>
                            <p>I have found my time providing respite care very enjoyable and rewarding. It is a bit daunting to start with as with all new experiences. However, given the support of Geeza break, and other carers I know, advice and support are always a phone call away at any time.</p>
                            <p>Prior to the first respite session, I always meet the parent along with the Geeza break worker, including a visit to my home, which allows them to get to know me and see where their child will be staying etc., which gives them reassurance.</p>
                            <p>During the respite, especially for preschoolers, I often take them to a soft play or park, which lets them have some outdoor play time and burn off some energy. (This is always agreed in advance with the parent) I also sometimes meet up with another respite carer there which allows for peer play for the child.</p>
                            <p><strong>Geeza Break Marks Volunteers' week 2025</strong></p>
                            <p>During the sessions with the children, I am also mindful of the GIRFEC principles.</p>
                            <p>An example of this was a 4-year-old child who was quite nervous and withdrawn at the start of the respite sessions. By the end she was really looking forward to coming along and standing on the verandah waiting on me and waving when I picked her up on a Friday.</p>
                            <p>During the sessions the child got so used to their routine and would 'prompt' me after dinner for her bath and after playing with the toys and games, watching cartoons etc., she would choose a book and get herself cosy on the couch for stories.</p>
                            <p>It is really rewarding to see positive behavioral signs from the child as the respite progresses, however small, and to see them get to know and trust you.</p>
                        </div>
                    </div>

                    <button
                        type="button"
                        class="btn bg-white bg-opacity-80 text-dark fw-semibold px-3 py-2 rounded shadow-sm hover-bg-white transition"
                        onclick="toggleStory('gerry', this)"
                        aria-expanded="false"
                        style="border: none;"
                    >
                        Read more
                    </button>
                </article>
            </div>

            <!-- Card: Nathen -->
            <div class="col-md-6 mb-4">
                <article
                    class="animate-cardIn rounded-3 shadow-lg p-4 transition-all duration-300 hover:shadow-xl"
                    style="background:#a6ce39; color:#000; border: none;"
                    id="story-nathen"
                >
                    <div class="d-flex align-items-center gap-3 mb-4">
                        <div class="rounded-circle d-flex align-items-center justify-content-center bg-white bg-opacity-75 text-dark fw-bold" style="width: 56px; height: 56px; font-size: 1.25rem;">N</div>
                        <div>
                            <h3 class="fw-bold mb-1" style="font-size: 1.25rem;">Nathen — Volunteer at Geeza Break</h3>
                            <p class="opacity-75 mb-0" style="font-size: 0.875rem;">Volunteer story</p>
                        </div>
                    </div>

                    <!-- PREVIEW (4 lines) -->
                    <p class="clamp-4 mb-4" style="line-height: 1.6; font-size: 1.02rem;" data-preview="nathen">
                        Geeza Break marks Volunteers' Week 2025. "After attending a Geeza Chance group as a participant, starting to volunteer
                        alongside Geeza Chance has been the best experience I've ever had in my life… I had low self-esteem and was not very confident.
                        Taking part slowly gave me confidence and showed me there were a lot of young people experiencing the same situation…"
                    </p>

                    <!-- FULL TEXT (hidden until expanded) -->
                    <div class="d-none" style="line-height: 1.6; font-size: 1.02rem;" data-full="nathen">
                        <div class="mb-3">
                            <p><strong>Geeza Break marks Volunteers' Week 2025.</strong></p>
                            <p>"After attending a Geeza Chance group as a participant, starting to volunteer alongside Geeza Chance has been the best experience I've ever had in my life. It all started from being a young person in Kinship Care myself. I had low self-esteem and was not very confident. I was about 12 when I started a group for the first time, and taking part in the group slowly gave me confidence and showed me that there were a lot of young people experiencing the same situation I was in. I didn't feel so alone anymore as they could understand me. I gained more confidence and started to feel better about myself.</p>
                            <p>Over the years I've gotten to work alongside all different types of personalities and all different type of situations that have taught me many skills that help me in my day-to-day life. For example, my first aid training, defibrillator training and my volunteering role helped me get my Duke of Edinburgh whilst I was in school. I'm committed to my volunteering and enjoy being part of the team supporting the young person's support worker and other staff. I am helping others, and I see a lot of quiet young people come to the groups and see their confidence grow and they are more comfortable being there and taking part. I get to see them take steps forward, which is amazing. We take them on trips to experience something new and see how they push themselves to always try new things. I still learn new things from the young people all the time! Like me years before, I can see after all the sessions that it's made a difference in everyone's lives. They have made new friends, gained new skills and had a better understanding of themselves, their emotions, and the others in the groups. The group has given us all a safe, encouraging place to flourish with support always being there to guide us."</p>
                            <p>– Nathen, Volunteer at Geeza Break</p>
                        </div>
                    </div>

                    <button
                        type="button"
                        class="btn bg-white bg-opacity-80 text-dark fw-semibold px-3 py-2 rounded shadow-sm hover-bg-white transition"
                        onclick="toggleStory('nathen', this)"
                        aria-expanded="false"
                        style="border: none;"
                    >
                        Read more
                    </button>
                </article>
            </div>
        </div>
    </div>
</section>

<section class="roles-section">
    <div class="container">
        <h2>Volunteer Roles Available</h2>
        <div class="role-grid">
            <div class="role-card">
                <div class="role-icon">
                    <i class="fas fa-child"></i>
                </div>
                <h3>Play Session Helper – Volunteer Respite Provider</h3>
                <p>Support our group creche sessions by helping children with activities, games, and crafts. No special skills are required—just enthusiasm and patience! (PVG scheme membership is required.)</p>
                <div class="role-commitment">2-4 hours</div>
            </div>
            <div class="role-card">
                <div class="role-icon">
                    <i class="fas fa-home"></i>
                </div>
                <h3>Respite Carer</h3>
                <p>Provide overnight respite care for families by supporting bedtime routines and promoting positive wellbeing outcomes.</p>
                <div class="role-commitment">Flexible hours</div>
            </div>
            <div class="role-card">
                <div class="role-icon">
                    <i class="fas fa-laptop"></i>
                </div>
                <h3>Admin/ Reception Support</h3>
                <p>Help with administrative tasks like data entry, filing, organizing events, and maintaining our volunteer database.</p>
                <div class="role-commitment">4-8 hours/week</div>
            </div>
            <div class="role-card">
                <div class="role-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>Fundraising support</h3>
                <p>Participate in fundraising events and help us reach more people in our community.</p>
                <div class="role-commitment">6-10 hours/week</div>
            </div>
            <div class="role-card">
                <div class="role-icon">
                    <i class="fas fa-users"></i>
                </div>
                <h3>Respite Sitter</h3>
                <p>Support existing respite sitters to offer a supportive 2-1 adult ratio for our community-based respite.</p>
                <div class="role-commitment">4hrs</div>
            </div>
            <div class="role-card">
                <div class="role-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h3>Work Experience</h3>
                <p>A nurturing introduction into the world of work for high school aged young people in Glasgow.</p>
                <div class="role-commitment">flexible</div>
            </div>
        </div>
    </div>
</section>

<section class="student-section">
    <div class="container">
        <h2>Student Placements</h2>
        <div class="student-info">
            <p>We welcome students from various disciplines who are looking to gain valuable experience in child care, community work, and charity management. Our placements offer hands-on learning opportunities and the chance to make a real difference.</p>

            <div class="student-benefits">
                <div class="benefit-item">
                    <h4><i class="fas fa-book-open text-primary"></i> Learning Experience</h4>
                    <p>Gain practical experience in child care, community engagement, and charity operations while earning academic credits.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-users text-primary"></i> Professional Development</h4>
                    <p>Develop transferable skills in communication, teamwork, and project management that will benefit your future career and practice.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-heart text-primary"></i> Making a Difference</h4>
                    <p>Contribute to meaningful work that directly supports the lives of children and their families in our community.</p>
                </div>
                <div class="benefit-item">
                    <h4><i class="fas fa-handshake text-primary"></i> Networking</h4>
                    <p>Build connections with professionals in the charity sector and expand your professional network.</p>
                </div>
            </div>

            <p><strong>Suitable for students in:</strong> Social Work, Psychology, Education, Business, IT, Health & Social Care, and other related fields.</p>
            <p><strong>Placement Duration:</strong> From 1 week work experience to 12-month placements depending on your course requirements.</p>
        </div>
    </div>
</section>

<section class="form-section">
    <div class="container">
        <h2>Express Your Interest</h2>

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <form method="post" class="interest-form" novalidate>
            {% csrf_token %}

            <div class="form-group">
                <label for="{{ form.full_name.id_for_label }}">Full Name *</label>
                <input type="text" name="full_name" id="{{ form.full_name.id_for_label }}"
                       value="{{ form.full_name.value|default:'' }}"
                       placeholder="e.g. Emily Drummond"
                       class="w-full border rounded-lg px-4 py-2 focus:ring focus:ring-blue-300"
                       required>
                {% if form.full_name.errors %}
                    <div class="text-danger">{{ form.full_name.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.email.id_for_label }}">Email Address *</label>
                <input type="email" name="email" id="{{ form.email.id_for_label }}"
                       value="{{ form.email.value|default:'' }}"
                       placeholder="e.g. emily@example.com"
                       class="w-full border rounded-lg px-4 py-2 focus:ring focus:ring-blue-300"
                       required>
                {% if form.email.errors %}
                    <div class="text-danger">{{ form.email.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.phone.id_for_label }}">Phone Number *</label>
                <input type="tel" name="phone" id="{{ form.phone.id_for_label }}"
                       value="{{ form.phone.value|default:'' }}"
                       placeholder="+44 7700 900123"
                       pattern="^\+44\s?\d{9,10}$"
                       class="w-full border rounded-lg px-4 py-2 focus:ring focus:ring-blue-300"
                       required>
                <small class="text-white/80 text-sm">Format: +44 followed by 9–10 digits</small>
                {% if form.phone.errors %}
                    <div class="text-danger">{{ form.phone.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label>I'm interested in these roles: *</label>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-2">
                    {% for role_value, role_label in form.roles.field.choices %}
                    <div class="flex items-center">
                        <input type="checkbox" name="roles" value="{{ role_value }}"
                               id="id_roles_{{ forloop.counter }}"
                               class="mr-2"
                               {% if role_value in form.roles.value %}checked{% endif %}>
                        <label for="id_roles_{{ forloop.counter }}" class="text-white">{{ role_label }}</label>
                    </div>
                    {% endfor %}
                </div>
                {% if form.roles.errors %}
                    <div class="text-danger">{{ form.roles.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.availability.id_for_label }}">Availability</label>
                <input type="text" name="availability" id="{{ form.availability.id_for_label }}"
                       value="{{ form.availability.value|default:'' }}"
                       placeholder="e.g. Mondays & Wednesdays, afternoons"
                       class="w-full border rounded-lg px-4 py-2 focus:ring focus:ring-blue-300">
            </div>

            <div class="form-group">
                <div class="flex items-center">
                    <input type="checkbox" name="is_student" id="{{ form.is_student.id_for_label }}"
                           {% if form.is_student.value %}checked{% endif %}
                           class="mr-2">
                    <label for="{{ form.is_student.id_for_label }}" class="text-white">I'm a student</label>
                </div>
            </div>

            <div class="form-group">
                <label for="{{ form.course_or_discipline.id_for_label }}">Course / Discipline</label>
                <input type="text" name="course_or_discipline" id="{{ form.course_or_discipline.id_for_label }}"
                       value="{{ form.course_or_discipline.value|default:'' }}"
                       placeholder="e.g. BA in Social Work"
                       class="w-full border rounded-lg px-4 py-2 focus:ring focus:ring-blue-300">
            </div>

            <div class="form-group">
                <label for="{{ form.message.id_for_label }}">Tell us about yourself and why you'd like to volunteer</label>
                <textarea name="message" id="{{ form.message.id_for_label }}"
                          placeholder="e.g. I enjoy working with children and helping families..."
                          class="w-full border rounded-lg px-4 py-2 focus:ring focus:ring-blue-300"
                          rows="4">{{ form.message.value|default:'' }}</textarea>
            </div>

            <div class="form-group">
                <div class="flex items-center">
                    <input type="checkbox" name="consent_contact" id="{{ form.consent_contact.id_for_label }}"
                           {% if form.consent_contact.value %}checked{% endif %}
                           class="mr-2" required>
                    <label for="{{ form.consent_contact.id_for_label }}" class="text-white">I consent to Geeza Break contacting me about volunteering/placements. *</label>
                </div>
                {% if form.consent_contact.errors %}
                    <div class="text-danger">{{ form.consent_contact.errors.0 }}</div>
                {% endif %}
            </div>

            <button type="submit" class="bg-blue-600 text-white font-semibold px-6 py-2 rounded-lg shadow hover:bg-blue-700 w-full" id="volunteerSubmitBtn">Submit Interest</button>
        </form>

        <script>
        // Story toggle function
        function toggleStory(key, btn) {
            const full = document.querySelector(`[data-full="${key}"]`);
            const preview = document.querySelector(`[data-preview="${key}"]`);
            const expanded = full.classList.contains('d-none') === false;

            if (expanded) {
                // Collapse
                full.classList.add('d-none');
                preview.classList.add('clamp-4');
                btn.textContent = 'Read more';
                btn.setAttribute('aria-expanded', 'false');
            } else {
                // Expand
                full.classList.remove('d-none');
                preview.classList.remove('clamp-4');
                btn.textContent = 'Show less';
                btn.setAttribute('aria-expanded', 'true');
            }
        }

        // Basic form validation before submission
        document.querySelector('.interest-form').addEventListener('submit', function(e) {
            const requiredFields = [
                'id_full_name',
                'id_email',
                'id_phone',
                'id_consent_contact'
            ];

            let hasErrors = false;
            let firstErrorField = null;

            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    // Check if field is empty
                    let isEmpty = false;
                    if (field.type === 'checkbox') {
                        isEmpty = !field.checked;
                    } else {
                        isEmpty = !field.value.trim();
                    }

                    if (isEmpty) {
                        field.style.borderColor = 'red';
                        hasErrors = true;
                        if (!firstErrorField) {
                            firstErrorField = field;
                        }
                    } else {
                        field.style.borderColor = '';
                    }
                }
            });

            // Check if at least one role is selected
            const roleCheckboxes = document.querySelectorAll('input[name="roles"]:checked');
            if (roleCheckboxes.length === 0) {
                const roleContainer = document.querySelector('.checkbox-group');
                if (roleContainer) {
                    roleContainer.style.border = '2px solid red';
                    roleContainer.style.borderRadius = '8px';
                    roleContainer.style.padding = '1rem';
                    hasErrors = true;
                }
            } else {
                const roleContainer = document.querySelector('.checkbox-group');
                if (roleContainer) {
                    roleContainer.style.border = '';
                }
            }

            if (hasErrors) {
                e.preventDefault();
                alert('Please fill in all required fields marked with * and select at least one role');
                if (firstErrorField) {
                    firstErrorField.focus();
                    firstErrorField.scrollIntoView({behavior: 'smooth', block: 'center'});
                }
                return false;
            }
        });
        </script>
    </div>
</section>
{% endblock %}
